%4. Ausblick, was kÃ¶nnte man erweitern (warum ist das idealerweise einfach? => Weil dein code halt so krass gut aufgebaut ist...), oder auch anders machen?

This report explained how a CPU emulator can be implemented using metaprogramming techniques.
The necessary basics, such as compile time data types and concepts, have been explained 
in the first section. The second section explained the structure of the emulator and how
programs are executed by the emulator. Additionally a program for emulating a Turing
machine has been implemented for the CPU emulator to prove that the emulator, and thus
C++ metaprogramming is Turing complete. It is important to consider that while in theory
arbitrary programs can be executed in reality the programs are limited by the compiler.

\subsection{Future Improvements}
The primariy problem that the emulator faces at the moment are the limitations in both program and memory size.
These limitations are a direct result of the data structure that has been used: a singly linked list. The required 
template depth of the list increases linearly with the size of the list. By using a different data structure with
lower template depth complexity, such as a binary tree, much larger programs (in the order of $2^{1024}$ instructions)
could be implemented.

If necessary more instructions can be added easily in the future. A new instruction
requires the type declaration and the specialization of the \lstinline{InstrImpl}
struct with the implementation of the instruction. The current instruction set
is sufficient to implement all programs, but new instructions might reduce the
complexity of programs significantly.

Another improvement which would improve the usability of the emulator is the implementation
of input and output operations. Currently there is no easy way of doing this, there are
similar programs which implement I/O operations by recompiling the program for
every input \cite{iohack1} \cite{iohack2} which could be implemented for this
emulator as well but would require additional runtime code for recompiling the program.

Another usability improvement for the emulator, especially when writing large programs,
would be the addition of labels, like they are used in most assembly dialects.
Such labels will be implemented in the future as part of an assembler, but are
currently not supported as they are not a feature provided by a CPU but by an assembler.
